"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[817],{7817:(s,t,e)=>{e.r(t),e.d(t,{default:()=>N});var a=e(5043);const r={image:"ProfileInfo_image__pu5gV"};var o=e(520),i=e(579);a.Component;const n=s=>{let[t,e]=(0,a.useState)(!1),[r,o]=(0,a.useState)(s.status);(0,a.useEffect)((()=>{o(s.status)}),[s.status]);return(0,i.jsxs)("div",{children:[!t&&(0,i.jsx)("div",{children:(0,i.jsx)("span",{onDoubleClick:()=>{e(!0)},children:s.status||"-------"})}),t&&(0,i.jsx)("div",{children:(0,i.jsx)("input",{autoFocus:!0,onBlur:()=>{e(!1),s.updateStatus(r)},onChange:s=>{o(s.currentTarget.value)},value:r})})]})},l=s=>{var t;let{profile:e,status:a,updateStatus:l}=s;return e?(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:r.descriptionBlock,children:[null!==(t=e.photos)&&void 0!==t&&t.large?(0,i.jsx)("img",{src:e.photos.large,alt:"Profile"}):(0,i.jsx)("img",{src:"https://via.placeholder.com/150",alt:"Default avatar",className:r.defaultAvatar}),(0,i.jsx)("p",{children:e.fullName}),(0,i.jsx)(n,{status:a,updateStatus:l})]})}):(0,i.jsx)(o.A,{})};var u=e(5977);const d={postsBlock:"MyPosts_postsBlock__SesW+",posts:"MyPosts_posts__WLM2O"},p="Post_item__rBDBL",c=s=>(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS94-h02nA6tjH-orlYL1CJN7kZ2QCO2ldtww&s"}),s.message,(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"like"})," ",s.likesCount]})]});var h=e(5963),m=e(3842),x=e(6545),j=e(6292);(0,x.d)(10);let g=(0,m.A)({form:"ProfileAddNewPostForm"})((s=>(0,i.jsx)("form",{onSubmit:s.handleSubmit,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)(h.A,{name:"newPostText",component:j.TM,validate:[x.Q,(0,x.d)(10)],placeholder:"Post message"})}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"})})]})})));const f=a.memo((s=>{let t=s.posts.map((s=>(0,i.jsx)(c,{id:s.id,message:s.message,likesCount:s.likesCount},s.id)));return(0,i.jsxs)("div",{className:d.postsblock,children:[(0,i.jsx)("h3",{children:"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"}),(0,i.jsx)(g,{onSubmit:t=>{s.addPost(t.newPostText)}}),(0,i.jsx)("div",{className:d.posts,children:t})]})}));var v=e(3003);const P=(0,v.Ng)((s=>({posts:s.profilePage.posts,newPostText:s.profilePage.newPostText})),(s=>({addPost:t=>{s((0,u.oL)(t))}})))(f),S=s=>(0,i.jsxs)("div",{children:[(0,i.jsx)(l,{profile:s.profile,status:s.status,updateStatus:s.updateStatus}),(0,i.jsx)(P,{store:s.store})]});var _=e(3216),k=e(7863),C=e(3923);class A extends a.Component{redirectToMainUser(){let s=this.props.match.params.userId;s||(s=this.props.authorizedUserId),this.props.getProfilePage(s),this.props.getStatus(s)}componentDidMount(){this.redirectToMainUser()}componentDidUpdate(s){this.props.match.params.userId!==s.match.params.userId&&this.redirectToMainUser()}render(){return(0,i.jsx)(S,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus})}}const N=(0,C.Zz)((0,v.Ng)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth})),{getProfilePage:u.L_,getStatus:u.BS,updateStatus:u.yB}),(function(s){return function(t){const e={params:(0,_.g)()};return(0,i.jsx)(s,{...t,match:e})}}),k.H)(A)},7863:(s,t,e)=>{e.d(t,{H:()=>l});var a=e(5043),r=e(3216),o=e(3003),i=e(579);let n=s=>({isAuth:s.auth.isAuth});const l=s=>{class t extends a.Component{render(){return!1===this.props.isAuth?(0,i.jsx)(r.C5,{to:"/login"}):(0,i.jsx)(s,{...this.props})}}return(0,o.Ng)(n)(t)}}}]);
//# sourceMappingURL=817.da0f356e.chunk.js.map